webpackJsonp([10],{"19YW":function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),c=a("U7vG"),s=n(c),i=a("2mIb"),d=n(i),f=a("F8kA"),p=function(e){function t(){return l(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),u(t,[{key:"render",value:function(){var e=this.props.location.pathname+this.props.location.search;return s.default.createElement("div",{className:d.default.Box},s.default.createElement("div",{className:d.default.content},s.default.createElement("i",{className:d.default.iconfont+" iconfont"},""),this.props.link.map(function(t,a){return s.default.createElement("span",{key:a+t.to},s.default.createElement(f.Link,{to:t.to?t.to:e,style:{color:t.arrow?"":"#d01c0b"}},t.name),t.arrow?">":"")})))}}]),t}(c.Component);t.default=(0,f.withRouter)(p)},"2mIb":function(e,t){e.exports={Box:"Box__2MP_YH",content:"content__3wsYyg",iconfont:"iconfont__2HWOVa"}},"4fh5":function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function l(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a("U7vG"),i=n(s),d=a("D4Lr"),f=n(d),p=a("Rxcj"),m=n(p),h=a("19YW"),y=n(h),w=a("mN8/"),E=n(w),_=a("Dy/9"),v=n(_),b=a("mw3O"),g=(n(b),a("PJh5")),S=n(g),k=[{name:"信用公示",to:"/main/creditPublicity/index",arrow:!0},{name:"信用目录公示",to:"/main/creditPublicity/honestMenu",arrow:!1}],O=function(e){function t(){var e,a,n,u;r(this,t);for(var c=arguments.length,s=Array(c),i=0;i<c;i++)s[i]=arguments[i];return a=n=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),n.state={data:[],departments:[],SelectList:[],checkedDepart:"全部单位",page:1,total:0,str:"",isLoading:!0,selectFocus:!1,selectedValue:"",valueShow:!0,selectInput:""},n.keyEnter=function(e){13===(e.keyCode||e.which||e.charCode)&&n.Request()},n.GetInputVal=function(e){n.setState({str:e.target.value})},n.rowSpanData=function(e,t){for(var a=[],n=[],r={},o=[],u=0;u<e.length;u++){var c=e[u];r[c[t]]?(r[c[t]].rowSpan+=1,r[c[t]].data.push(c)):(r[c[t]]={rowSpan:1,data:[]},r[c[t]].data.push(c),n.push(e[u][t]))}for(var s=0;s<n.length;s++){r[n[s]].data[0].rowSpan=r[n[s]].rowSpan;var i=r[n[s]].data;i[i.length-1].border=1,a.push({rowSpan:r[n[s]].rowSpan,data:i})}return a.map(function(e,t){o.push.apply(o,l(e.data))}),o},n.handleCut=function(e){return e?e.length>8?e.substring(0,8)+"...":e:"---"},n.Request=function(){var e={page:n.state.page-1,size:10,department:"全部单位"===n.state.selectedValue?"":n.state.selectedValue,name:n.state.str};n.setState({data:[],isLoading:!0},function(){E.default.post("/shantoucredit_pubserver/index/getCreditCatalogues",e).then(function(e){if(200!==e.status)throw new Error("网络错误");0!==e.data.data.content.length?n.setState({data:n.rowSpanData(e.data.data.content,"department"),total:e.data.data.totalElements}):n.setState({isLoading:!1})}).catch(function(e){})})},n.SearchBtn=function(){n.setState({page:1},function(){n.Request()})},n.pageChange=function(e){n.setState({page:e},function(){n.Request()})},n.onSelect=function(e){e.stopPropagation(),n.setState({selectFocus:!n.state.selectFocus})},n.onSelected=function(e){n.setState({selectedValue:e,selectInput:"",valueShow:!0},function(){n.Request()})},n.onSelectSearch=function(e){var t=e.target.value,a=n.state.departments,l=a.filter(function(e){if(-1!==e.name.indexOf(t))return e});n.setState({selectInput:t,valueShow:!t,SelectList:l})},n.closeSelect=function(){n.setState({selectFocus:!1,SelectList:n.state.departments})},u=a,o(n,u)}return u(t,e),c(t,[{key:"componentDidMount",value:function(){var e=this;E.default.get("/shantoucredit_pubserver/jointDevelopment/buildDepartment").then(function(t){if(200!==t.status)throw new Error("网络错误");var a=t.data;a.unshift({name:"全部单位"}),e.setState({departments:a,SelectList:a})}).catch(function(e){}),this.Request(),window.addEventListener("keydown",this.keyEnter)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.keyEnter)}},{key:"render",value:function(){var e=this,t=this.state,a=t.selectFocus,n=t.selectedValue,l=t.valueShow,r=t.selectInput,o=t.SelectList;return i.default.createElement("div",null,i.default.createElement(y.default,{link:k}),i.default.createElement("div",{className:f.default.HonestMenu},i.default.createElement("h4",null,"信用目录公示"),i.default.createElement("div",{className:f.default["honest-menu-search"]},i.default.createElement("div",{className:f.default.select,onClick:this.onSelect},i.default.createElement("div",{style:{opacity:a?.4:1,display:l?"block":"none"},className:f.default.selectValue},n||"全部单位"),i.default.createElement("input",{type:"text",onChange:this.onSelectSearch,value:r}),i.default.createElement("span",{className:f.default.icon+" "+[a?f.default.iconRorate:""]}),i.default.createElement("div",{style:{display:a?"block":"none"},className:f.default.drapList,onMouseLeave:this.closeSelect},0==o.length?i.default.createElement("ul",null,i.default.createElement("li",null,"暂无相关单位")):i.default.createElement("ul",null,o.map(function(t,a){return i.default.createElement("li",{key:a+t.name,onClick:function(a){return e.onSelected(t.name)}},t.name)})))),i.default.createElement("input",{type:"text",placeholder:"请输入信用资源名称",onChange:this.GetInputVal,value:this.state.str}),i.default.createElement("button",{className:"iconfont",onClick:this.SearchBtn},"")),i.default.createElement("div",{className:f.default.table},i.default.createElement("table",null,i.default.createElement("thead",null,i.default.createElement("tr",null,i.default.createElement("td",{width:"20%"},"提供单位"),i.default.createElement("td",{width:"15%"},"信用资源名称"),i.default.createElement("td",{width:"10%"},"资源范围"),i.default.createElement("td",{width:"15%"},"是否对社会公开"),i.default.createElement("td",{width:"15%"},"共享条件"),i.default.createElement("td",{width:"15%"},"数据量"),i.default.createElement("td",{width:"15%"},"更新日期"))),i.default.createElement("tbody",null,0===this.state.data.length?i.default.createElement("tr",{className:f.default["not-data"]},i.default.createElement("td",{colSpan:7},this.state.isLoading?i.default.createElement(v.default,null):i.default.createElement("p",{className:f.default["no-data"]},"暂无数据"))):this.state.data.map(function(t,a){return i.default.createElement("tr",{key:a,className:f.default[t.border?"row":""]},t.rowSpan&&i.default.createElement("td",{rowSpan:t.rowSpan,className:f.default[t.rowSpan?"row":""]},t.department||"---"),i.default.createElement("td",null,t.name||"---"),i.default.createElement("td",null,t.dataRange||"---"),i.default.createElement("td",null,t.whetherOpen||"---"),i.default.createElement("td",{title:t.shareCondition},e.handleCut(t.shareCondition)||"---"),i.default.createElement("td",null,t.dataCount||0),i.default.createElement("td",null,t.updatetime?(0,S.default)(t.updatetime).format("YYYY-MM-DD"):"---"))})))),i.default.createElement("div",{className:f.default.page},(this.state.total||null)&&i.default.createElement(m.default,{current:this.state.page,total:this.state.total,pageSize:10,onChange:this.pageChange}))))}}]),t}(s.Component);t.default=O},D4Lr:function(e,t){e.exports={HonestMenu:"HonestMenu__2rOdU-","honest-menu-search":"honest-menu-search__P_F33X",select:"select__l2SdLX",selectValue:"selectValue__29D3eg",icon:"icon__k_eIA1",iconRorate:"iconRorate__s-IWKG",drapList:"drapList__3ky6oH",table:"table__3iJmYQ",row:"row__3jKCJ4","not-data":"not-data__3mwzDY","no-data":"no-data__yHsfol",page:"page__GXrMdN"}}});