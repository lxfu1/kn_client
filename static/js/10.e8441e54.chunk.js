webpackJsonp([10],{"+3Oe":function(e,t){e.exports={container:"container__2i875p"}},E2s3:function(e,t,n){e.exports=n.p+"assets/images/CTgXuXEHPd.png"},FdUr:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Keys=t.LOCATIONS=t.IMAGE_URLS=void 0;var i=n("E2s3"),r=o(i),a=n("eNDv"),c=o(a),d=n("YwKm"),l=o(d),u=n("vlBA"),s=o(u);t.IMAGE_URLS={earthCloud:r.default,point1:c.default,point2:l.default,point3:s.default},t.LOCATIONS=[{coord:[106.976117,13.435991]},{coord:[22.201374,3.11419]},{coord:[-65.518633,-2.514328]},{coord:[255.008353,42.443818]},{coord:[204.084636,12.825783]},{coord:[128.140594,-18.162515]},{coord:[-19.626494,-26.372856]},{coord:[123.78331,76.368416]},{coord:[-138.782911,75.806082]},{coord:[-138.782911,75.806082]},{coord:[-27.221703,-28.076604]},{coord:[-138.194197,-32.419598]},{coord:[243.29215,59.09957]},{coord:[143.799569,59.250673]},{coord:[50.194122,60.869068]},{coord:[-4.85059,61.996743]},{coord:[-57.540448,56.589354]},{coord:[267.135047,72.952833]},{coord:[-100.516534,28.687699]},{coord:[-48.415389,28.167247]},{coord:[235.344518,-1.133911]}],t.Keys=[{queryEnable:2,keyword:"海南省"},{queryEnable:2,keyword:"北京市"},{queryEnable:2,keyword:"贵阳市"},{queryEnable:1,keyword:"成都市"},{queryEnable:1,keyword:"重庆市"},{queryEnable:2,keyword:"深圳"},{queryEnable:2,keyword:"杭州"},{queryEnable:2,keyword:"上海"},{queryEnable:1,keyword:"天津"},{queryEnable:1,keyword:"济南"},{queryEnable:1,keyword:"哈尔滨"}]},YwKm:function(e,t,n){e.exports=n.p+"assets/images/3IlPLJawpC.png"},Zthn:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c=n("/qCn"),d=o(c),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();n("OzFS");var u=n("GiK3"),s=o(u),f=n("FdUr"),p=n("+3Oe"),v=o(p),h=n("hKoQ");d.default.config({top:80});var E=function(e){function t(e){i(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.initMap=function(){n.initDom(f.Keys),window.onresize=function(){document.querySelector("#canvas-frame").innerHTML="",n.initDom(n.points)}},n.loadScript=function(e){return new h.Promise(function(t,n){var o=document.createElement("script");o.src=e,o.className="three",document.body.appendChild(o),o.onload=function(){t()}})},n.clearDom=function(){n.event&&n.event.removeAll(),n.clickList.length&&n.clickList.map(function(e){e.off("click")})},n.initDom=function(e){n.initCanvas(),n.initRenderer(),n.initCamera(),n.initScene(),n.initLight(),n.initEarth(),n.initCloud(e),n.animate()},n.initCanvas=function(){var e=void 0,t=void 0;e=document.createElement("canvas"),e.id="cvs",e.width=2048,e.height=512,t=e.getContext("2d"),t.beginPath(),t.fillStyle="#212b4d",t.rect(0,0,2048,512),t.fill(),n.canvas=e},n.initRenderer=function(){var e=void 0;n.width=document.getElementById("canvas-frame").clientWidth,n.height=document.getElementById("canvas-frame").clientHeight,e=new THREE.WebGLRenderer({alpha:!0,antialias:!0,preserveDrawingBuffer:!0}),e.setSize(n.width,n.height),document.getElementById("canvas-frame").appendChild(e.domElement),e.setClearColor(464690,0),n.renderer=e},n.initCamera=function(){var e=void 0;e=new THREE.PerspectiveCamera(45,n.width/n.height,1,1e4),e.position.x=0,e.position.y=0,e.position.z=400,e.up.x=0,e.up.y=0,e.up.z=0,e.lookAt({x:0,y:0,z:0}),n.camera=e},n.initScene=function(){n.scene=new THREE.Scene,n.group=new THREE.Group,n.scene.add(n.group)},n.initLight=function(){var e=void 0;e=new THREE.PointLight(2436950,1,500),e.position.set(100,100,200),n.scene.add(e),n.light=e},n.initEarth=function(){var e=void 0,t=void 0,o=void 0,i=void 0;e=new THREE.Texture(n.canvas),t=new THREE.SphereGeometry(120,50,50),o=new THREE.MeshPhongMaterial({color:16777215,overdraw:.5}),e.needsUpdate=!0,i=new THREE.Mesh(t,o),i.position.set(0,0,0),n.group.add(i)},n.initCloud=function(e){var t=void 0,o=void 0,i=void 0,r=void 0;t=new THREE.TextureLoader,t.load(f.IMAGE_URLS.earthCloud,function(t){o=new THREE.SphereGeometry(128,50,50),i=new THREE.MeshBasicMaterial({map:t,transparent:!0,opacity:1}),r=new THREE.Mesh(o,i),r.position.set(0,0,0),n.group.add(r),n.event=new THREE.onEvent(n.scene,n.camera,n.callBack),e.forEach(function(e,t){var o=n.createLocationSprite(e,t);n.group.add(o)})})},n.callBack=function(e){d.default.success(e)},n.createLocationSprite=function(e,t){var o=void 0,i=void 0,r=void 0,a=void 0,c=void 0,d=void 0;return o=document.createElement("canvas"),i=o.getContext("2d"),o.width=64,o.height=70,i.fillStyle="1"===e.queryEnable?"#36d1fe":"#095ba1",i.shadowBlur=10,i.shadowColor="1"===e.queryEnable?"#36d1fe":"#095ba1",i.arc(32,25,15,0,2*Math.PI),i.fill(),i.beginPath(),i.font="16px Georgia",i.fillStyle="1"===e.queryEnable?"#fff":"#a7a6aa",i.fillText(e.keyword,32-16*e.keyword.length/2,62),r=new THREE.Texture(o),r.needsUpdate=!0,a=new THREE.SpriteMaterial({map:r,color:16777215,fog:!0}),c=new THREE.Sprite(a),c.name=e.keyword,d=n.LngLat2Coordinate(f.LOCATIONS[t].coord[0],f.LOCATIONS[t].coord[1],136),c.position.set(d.x,d.y,d.z),c.scale.set(15,15,15),c.on("click"),n.clickList.push(c),c},n.LngLat2Coordinate=function(e,t,n){var o=void 0,i=void 0,r=void 0,a=void 0,c=void 0;return o={lng:e,lat:t},i=n*Math.cos(o.lat/180*Math.PI),r=i*Math.sin(o.lng/180*Math.PI),a=n*Math.sin(o.lat/180*Math.PI),c=i*Math.cos(o.lng/180*Math.PI),{x:r,y:a,z:c}},n.getTexture=function(e){var t=void 0;return t=new THREE.TextureLoader,t.load(f.IMAGE_URLS[e])},n.animate=function(){n.active&&(n.group.rotation.y+=.001,requestAnimationFrame(n.animate),n.renderer.clear(),n.renderer.render(n.scene,n.camera))},n.active=!0,n.renderer=null,n.canvas=null,n.camera=null,n.scene=null,n.group=null,n.light=null,n.width=0,n.height=0,n.clickList=[],n.event=null,n.points=f.Keys,n}return a(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this;document.querySelector(".three")?this.initMap():this.loadScript("/thr/three.js").then(function(t){e.loadScript("/thr/event.js").then(function(t){e.initMap()})})}},{key:"componentWillReceiveProps",value:function(e){}},{key:"componentWillUnmount",value:function(){this.active=!1,this.event.removeAll(),this.clickList.map(function(e){e.off("click")}),window.onresize=null}},{key:"render",value:function(){return s.default.createElement("div",{className:v.default.container},s.default.createElement("div",{id:"canvas-frame",style:{width:"100%",height:"100%"}}))}}]),t}(u.Component);t.default=E},eNDv:function(e,t,n){e.exports=n.p+"assets/images/3Yv7HyUw5z.png"},vlBA:function(e,t,n){e.exports=n.p+"assets/images/2oap5RBC99.png"}});